local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/library"))()
local hud = RainbowUI:CreateWindow(240, 140)

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local collectingGifts = false
local GIFT_WAIT_TIME = 0.2 -- Puede ser super r√°pido

local function collectGiftsTouch()
    local root = game:GetService("Workspace"):FindFirstChild("World")
    if root then root = root:FindFirstChild("Zones") end
    if root then root = root:FindFirstChild("Level_WinterWonderland") end
    if root then root = root:FindFirstChild("Gift_Collectible") end

    if not root then
        hud:Notify("No se encontr√≥ la ruta de regalos")
        collectingGifts = false
        return
    end

    local children = root:GetChildren()
    if #children == 0 then
        hud:Notify("No hay regalos disponibles")
        collectingGifts = false
        return
    end

    hud:Notify("Recolectando con Touch Interest...")
    
    local character = LocalPlayer.Character
    local hrp = character and character:FindFirstChild("HumanoidRootPart")
    
    if not hrp then 
        hud:Notify("No se encontr√≥ el personaje")
        return 
    end

    for i, idFolder in ipairs(children) do
        if not collectingGifts then break end

        local mGift = idFolder:FindFirstChild("M_Gift")
        if mGift then
            local target = mGift:FindFirstChild("SM_Collectable")
            
            -- El truco est√° aqu√≠: simulamos el toque
            if target and target:IsA("BasePart") then
                pcall(function()
                    -- firetouchinterest(Parte1, Parte2, 0) significa "Empezar a tocar"
                    -- firetouchinterest(Parte1, Parte2, 1) significa "Dejar de tocar"
                    firetouchinterest(hrp, target, 0)
                    task.wait() -- Micro espera
                    firetouchinterest(hrp, target, 1)
                end)
                
                if i % 5 == 0 then -- Notificar cada 5 para no saturar la pantalla
                    hud:Notify("Procesados: " .. i)
                end
                task.wait(GIFT_WAIT_TIME)
            end
        end
    end

    collectingGifts = false
    hud:Notify("Recogida completada ‚úÖ")
end

-- =========================
-- Botones
-- =========================

hud:AddButton("RECOGER (MODO DIOS) üî•", function()
    if collectingGifts then
        collectingGifts = false
        hud:Notify("Cancelando...")
    else
        collectingGifts = true
        task.spawn(collectGiftsTouch)
    end
end)

hud:AddButton("NOTIFICAR ESTADO ‚úÖ", function()
    hud:Notify("Script Listo")
end)
