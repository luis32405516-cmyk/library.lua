local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/library"))()
local hud = RainbowUI:CreateWindow(240, 140)

local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local collectingGifts = false
local GIFT_WAIT_TIME = 0.5 -- Puede ser muy r√°pido porque no te mueves

local function bringGiftsToMe()
    local root = game:GetService("Workspace"):FindFirstChild("World")
    if root then root = root:FindFirstChild("Zones") end
    if root then root = root:FindFirstChild("Level_WinterWonderland") end
    if root then root = root:FindFirstChild("Gift_Collectible") end

    if not root then
        hud:Notify("Ruta no encontrada")
        collectingGifts = false
        return
    end

    local children = root:GetChildren()
    if #children == 0 then
        hud:Notify("No hay regalos")
        collectingGifts = false
        return
    end

    hud:Notify("Trayendo regalos hacia ti...")
    
    local character = LocalPlayer.Character
    local hrp = character and character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    for i, idFolder in ipairs(children) do
        if not collectingGifts then break end

        local mGift = idFolder:FindFirstChild("M_Gift")
        if mGift then
            local target = mGift:FindFirstChild("SM_Collectable")
            
            -- Verificamos que el regalo exista y sea una parte f√≠sica
            if target and target:IsA("BasePart") then
                
                -- Guardamos la posici√≥n original por si acaso el juego la necesita
                local oldCFrame = target.CFrame
                
                pcall(function()
                    -- TRAEMOS EL REGALO A TU POSICI√ìN
                    target.CanCollide = false -- Evita que el regalo te empuje
                    target.Anchored = true    -- Lo hacemos manipulable
                    target.CFrame = hrp.CFrame -- Lo pone exactamente donde est√°s t√∫
                    
                    -- Esperamos un instante para que el servidor registre el contacto
                    task.wait(0.1)
                    
                    -- OPCIONAL: Si el regalo no desaparece solo, puedes devolverlo
                    -- target.CFrame = oldCFrame 
                end)
                
                hud:Notify("Objeto " .. i .. " procesado")
                task.wait(GIFT_WAIT_TIME)
            end
        end
    end

    collectingGifts = false
    hud:Notify("Recogida finalizada")
end

-- =========================
-- Botones
-- =========================

hud:AddButton("TRAER REGALOS üéÅ‚ú®", function()
    if collectingGifts then
        collectingGifts = false
        hud:Notify("Deteniendo...")
    else
        collectingGifts = true
        spawn(bringGiftsToMe)
    end
end)

hud:AddButton("NOTIFICAR ESTADO ‚úÖ", function()
    hud:Notify("Listo para recoger")
end)
