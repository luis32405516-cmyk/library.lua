local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Prueba2"))()
local hud = RainbowUI:CreateWindow(230, 450)

local LocalPlayer = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

-- [[ VARIABLES IY CORE ]]
local flying = false
local flySpeed = 1
local noclipActive = false
local infJumpActive = false

local function getRoot(char)
    return char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
end

-- [[ 1. FLY IY (ADAPTADO PARA M√ìVIL/WASD) ]]
local function sFLY()
    flying = true
    local root = getRoot(LocalPlayer.Character)
    local hum = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    
    local BG = Instance.new('BodyGyro', root)
    local BV = Instance.new('BodyVelocity', root)
    
    BG.P = 9e4
    BG.maxTorque = Vector3.new(9e9, 9e9, 9e9)
    BG.cframe = root.CFrame
    BV.velocity = Vector3.new(0, 0.1, 0)
    BV.maxForce = Vector3.new(9e9, 9e9, 9e9)

    task.spawn(function()
        while flying do
            RunService.RenderStepped:Wait()
            if hum then hum.PlatformStand = true end
            
            -- En m√≥vil, el MoveDirection del Humanoid responde al Joystick
            if hum.MoveDirection.Magnitude > 0 then
                BV.velocity = hum.MoveDirection * (flySpeed * 50)
            else
                BV.velocity = Vector3.new(0, 0, 0)
            end
            BG.cframe = Camera.CFrame
        end
        if BG then BG:Destroy() end
        if BV then BV:Destroy() end
        if hum then hum.PlatformStand = false end
    end)
end

-- [[ 2. ESP (DE INFINITE YIELD) ]]
local function ApplyESP()
    for _, player in pairs(game:GetService("Players"):GetPlayers()) do
        if player ~= LocalPlayer and player.Character then
            local highlight = Instance.new("Highlight")
            highlight.Name = "IY_ESP"
            highlight.Parent = player.Character
            highlight.FillColor = Color3.new(1, 0, 0)
            highlight.OutlineColor = Color3.new(1, 1, 1)
        end
    end
end

-- [[ CONFIGURACI√ìN DE CARPETAS ]]

local fMov = hud:AddFolder("MOVIMIENTO ‚ö°")

fMov:AddButton("FLY (IY MOBILE) ‚úàÔ∏è", function()
    flying = not flying
    if flying then sFLY() else flying = false end
    hud:Notify(flying and "Fly ON" or "Fly OFF")
end)

fMov:AddSlider("Fly Speed", 1, 10, 1, function(v)
    flySpeed = v
end)

fMov:AddButton("NOCLIP üëª", function()
    noclipActive = not noclipActive
    if noclipActive then
        _G.NoclipConn = RunService.Stepped:Connect(function()
            if LocalPlayer.Character then
                for _, v in pairs(LocalPlayer.Character:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
            end
        end)
    else
        if _G.NoclipConn then _G.NoclipConn:Disconnect() end
    end
    hud:Notify("Noclip: " .. tostring(noclipActive))
end)

fMov:AddButton("INF JUMP ü¶ò", function()
    infJumpActive = not infJumpActive
    if infJumpActive then
        _G.JumpConn = UserInputService.JumpRequest:Connect(function()
            LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
        end)
    else
        if _G.JumpConn then _G.JumpConn:Disconnect() end
    end
end)

local fVis = hud:AddFolder("VISUALES üëÅÔ∏è")
fVis:AddButton("PLAYER ESP", function()
    ApplyESP()
    hud:Notify("ESP Aplicado")
end)

local fComb = hud:AddFolder("COMBATE üíÄ")
fComb:AddButton("WALK FLING üåÄ", function()
    _G.Wfling = not _G.Wfling
    task.spawn(function()
        while _G.Wfling do
            local root = getRoot(LocalPlayer.Character)
            if root then
                root.Velocity = root.Velocity * 10000 + Vector3.new(0, 10000, 0)
                RunService.RenderStepped:Wait()
                if root then root.Velocity = Vector3.new(0, 0, 0) end
            end
            task.wait()
        end
    end)
end)

hud:Notify("LUIS SCRIPT ANDROID LOADED üòà")
