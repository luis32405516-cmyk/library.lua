local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Prueba2"))()
local hud = RainbowUI:CreateWindow(230, 520)

local Players = game:GetService("Players")
local LP = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local VirtualUser = game:GetService("VirtualUser")

-- [[ VARIABLES GLOBALES ]]
local FLYING = false
local iyflyspeed = 1
local noclipActive = false
local ESP_ENABLED = false
local FLING_ENABLED = false
local RainbowSpeed = 0.5
local WalkSpeedValue = 16
local lightCycle = 0 
local InfJumpEnabled = false 
local targetLobbyID = "" 

-- Variables de Combate
local autoClicker = false
local autoWin = false

-- Variables de Sistema
local antiAfkEnabled = false

-- Variables God Mode
local godModeRegen = false
local antiVoidEnabled = false

-- [[ FUNCIONES DE APOYO ]]
local function getRoot(char)
	return char:FindFirstChild('HumanoidRootPart') or char:FindFirstChild('Torso') or char:FindFirstChild('UpperTorso')
end

-- [[ L√ìGICA ANTI-AFK ]]
LP.Idled:Connect(function()
    if antiAfkEnabled then
        VirtualUser:CaptureController()
        VirtualUser:ClickButton2(Vector2.new())
        hud:Notify("Anti-AFK: Evitando desconexi√≥n...")
    end
end)

LP.CharacterAdded:Connect(function(char)
    local hum = char:WaitForChild("Humanoid")
    hum.WalkSpeed = WalkSpeedValue
end)

UserInputService.JumpRequest:Connect(function()
    if InfJumpEnabled then
        local hum = LP.Character and LP.Character:FindFirstChildOfClass("Humanoid")
        if hum then hum:ChangeState("Jumping") end
    end
end)

-- [[ L√ìGICA FLY IY ]]
local function unmobilefly()
    pcall(function()
        FLYING = false
        local root = getRoot(LP.Character)
        if root:FindFirstChild("IY_Velocity") then root["IY_Velocity"]:Destroy() end
        if root:FindFirstChild("IY_Gyro") then root["IY_Gyro"]:Destroy() end
        if LP.Character:FindFirstChildWhichIsA("Humanoid") then
            LP.Character:FindFirstChildWhichIsA("Humanoid").PlatformStand = false
        end
    end)
end

local function mobilefly()
    unmobilefly()
    FLYING = true
    local char = LP.Character
    local root = getRoot(char)
    local camera = workspace.CurrentCamera
    local controlModule = require(LP.PlayerScripts:WaitForChild("PlayerModule"):WaitForChild("ControlModule"))
    
    local bv = Instance.new("BodyVelocity", root)
    bv.Name = "IY_Velocity"
    bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    bv.Velocity = Vector3.new(0, 0, 0)

    local bg = Instance.new("BodyGyro", root)
    bg.Name = "IY_Gyro"
    bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    bg.P = 1000
    bg.D = 50

    task.spawn(function()
        while FLYING do
            RunService.RenderStepped:Wait()
            if char and char.Parent and root:FindFirstChild("IY_Velocity") then
                char:FindFirstChildWhichIsA("Humanoid").PlatformStand = true
                root["IY_Gyro"].CFrame = camera.CFrame
                local direction = controlModule:GetMoveVector()
                local flyVelocity = Vector3.new(0,0,0)
                if direction.X ~= 0 then flyVelocity = flyVelocity + camera.CFrame.RightVector * (direction.X * (iyflyspeed * 50)) end
                if direction.Z ~= 0 then flyVelocity = flyVelocity - camera.CFrame.LookVector * (direction.Z * (iyflyspeed * 50)) end
                root["IY_Velocity"].Velocity = flyVelocity
            end
        end
    end)
end

-- [[ L√ìGICA ESP RAINBOW ]]
task.spawn(function()
    while true do
        task.wait()
        if ESP_ENABLED then
            local color = Color3.fromHSV((tick() * RainbowSpeed) % 1, 1, 1)
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LP and player.Character then
                    local hl = player.Character:FindFirstChild("IY_ESP") or Instance.new("Highlight", player.Character)
                    hl.Name = "IY_ESP"
                    hl.FillColor = color
                    hl.OutlineColor = Color3.new(1, 1, 1)
                    hl.FillTransparency = 0.5
                end
            end
        else
            for _, player in pairs(Players:GetPlayers()) do
                if player.Character and player.Character:FindFirstChild("IY_ESP") then player.Character.IY_ESP:Destroy() end
            end
        end
    end
end)

-- [[ CARPETA MOVIMIENTO ]]
local fMov = hud:AddFolder("MOVIMIENTO ‚ö°")
fMov:AddSlider("WalkSpeed üèÉ", 16, 300, 16, function(v)
    WalkSpeedValue = v
    if LP.Character and LP.Character:FindFirstChildOfClass("Humanoid") then
        LP.Character:FindFirstChildOfClass("Humanoid").WalkSpeed = v
    end
end)
fMov:AddButton("FLY MOBILE (IY) ‚úàÔ∏è", function()
    if FLYING then unmobilefly() else mobilefly() end
    hud:Notify(FLYING and "Fly ON" or "Fly OFF")
end)
fMov:AddSlider("Fly Speed", 1, 10, 1, function(v) iyflyspeed = v end)
fMov:AddButton("INFINITE JUMP ü¶ò", function()
    InfJumpEnabled = not InfJumpEnabled
    hud:Notify(InfJumpEnabled and "Inf Jump ON" or "Inf Jump OFF")
end)
fMov:AddButton("NOCLIP üëª", function()
    noclipActive = not noclipActive
    if noclipActive then
        _G.Noc = RunService.Stepped:Connect(function()
            if LP.Character then
                for _, v in pairs(LP.Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = false end end
            end
        end)
    else
        if _G.Noc then _G.Noc:Disconnect() end
    end
    hud:Notify("Noclip: " .. tostring(noclipActive))
end)

-- SE MOVI√ì AQU√ç PARA QUE SIEMPRE EST√â VISIBLE
fMov:AddButton("WALK FLING üåÄ", function()
    FLING_ENABLED = not FLING_ENABLED
    task.spawn(function()
        while FLING_ENABLED do
            RunService.Heartbeat:Wait()
            local root = getRoot(LP.Character)
            if root then
                local oldVel = root.Velocity
                root.Velocity = oldVel * 10000 + Vector3.new(0, 10000, 0)
                RunService.RenderStepped:Wait()
                if root then root.Velocity = oldVel end
            end
        end
    end)
end)

-- [[ CARPETA ID MANAGER ]]
local fId = hud:AddFolder("ID MANAGER üÜî")
fId:AddButton("COPIAR ID ACTUAL üìã", function()
    setclipboard(tostring(game.PlaceId))
    hud:Notify("ID Copiado")
end)
fId:AddTextBox("ID LOBBY", function(v) targetLobbyID = v end)
fId:AddButton("VOLVER AL LOBBY üè†", function()
    if targetLobbyID ~= "" then TeleportService:Teleport(tonumber(targetLobbyID), LP) end
end)
fId:AddButton("SERVER HOP üöÄ", function()
    local servers = {}
    local res = game:HttpGet("https://games.roblox.com/v1/games/"..game.PlaceId.."/servers/Public?sortOrder=Desc&limit=100")
    local data = HttpService:JSONDecode(res)
    for _, s in pairs(data.data) do
        if s.playing < s.maxPlayers and s.id ~= game.JobId then table.insert(servers, s.id) end
    end
    if #servers > 0 then TeleportService:TeleportToPlaceInstance(game.PlaceId, servers[math.random(1, #servers)], LP) end
end)

-- [[ CARPETA VISUALES ]]
local fVis = hud:AddFolder("VISUALES üëÅÔ∏è")
fVis:AddButton("ESP RAINBOW üåà", function()
    ESP_ENABLED = not ESP_ENABLED
end)
fVis:AddButton("CICLO ILUMINACI√ìN ‚òÄÔ∏èüåô", function()
    lightCycle = (lightCycle + 1) % 3
    if lightCycle == 1 then Lighting.ClockTime = 14 Lighting.Brightness = 2 Lighting.GlobalShadows = false
    elseif lightCycle == 2 then Lighting.ClockTime = 0 Lighting.Brightness = 1 Lighting.GlobalShadows = true
    else Lighting.ClockTime = 12 Lighting.Brightness = 1 Lighting.GlobalShadows = true end
end)

-- [[ CARPETA COMBATE (FILTRADA POR ID) ]]
if game.PlaceId == 14236123211 then
    local fComb = hud:AddFolder("COMBATE üíÄ")

    fComb:AddButton("AUTO GOLPES ü•ä", function()
        autoClicker = not autoClicker
        hud:Notify(autoClicker and "Golpes ON" or "Golpes OFF")
        task.spawn(function()
            while autoClicker do
                pcall(function()
                    game:GetService("ReplicatedStorage").Events.DamageIncreaseOnClickEvent:FireServer()
                end)
                task.wait(0.01)
            end
        end)
    end)

    fComb:AddButton("AUTO WIN (PUSH) üèÜ", function()
        autoWin = not autoWin
        hud:Notify(autoWin and "Auto-Win ON" or "Auto-Win OFF")
        task.spawn(function()
            while autoWin do
                pcall(function()
                    game:GetService("ReplicatedStorage").Events.PushEvent:FireServer(true)
                end)
                task.wait(0.1)
            end
        end)
    end)
end

-- [[ CARPETA SISTEMA ]]
local fSys = hud:AddFolder("SISTEMA üõ†Ô∏è")
fSys:AddButton("ANTI-AFK üö´üí§", function()
    antiAfkEnabled = not antiAfkEnabled
    hud:Notify(antiAfkEnabled and "Anti-AFK Activado" or "Anti-AFK Desactivado")
end)

fSys:AddButton("FPS BOOSTER (LAG FIX) üöÄ", function()
    hud:Notify("Optimizando gr√°ficos...")
    for _, v in pairs(game:GetDescendants()) do
        if v:IsA("Part") or v:IsA("UnionOperation") or v:IsA("MeshPart") or v:IsA("CornerWedgePart") or v:IsA("TrussPart") then
            v.Material = Enum.Material.Plastic
            v.Reflectance = 0
        elseif v:IsA("Decal") or v:IsA("Texture") then
            v.Transparency = 1
        elseif v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Lifetime = NumberRange.new(0)
        elseif v:IsA("Explosion") then
            v.Visible = false
        end
    end
    settings().Rendering.QualityLevel = 1
    hud:Notify("Gr√°ficos al m√≠nimo: FPS estables")
end)

-- [[ CARPETA GOD MODE ]]
local fGod = hud:AddFolder("GOD MODE üõ°Ô∏è")
fGod:AddButton("GOD MODE (REGEN) üíâ", function()
    godModeRegen = not godModeRegen
    hud:Notify(godModeRegen and "Regen God ON" or "Regen God OFF")
    task.spawn(function()
        while godModeRegen do
            pcall(function()
                if LP.Character and LP.Character:FindFirstChild("Humanoid") then
                    LP.Character.Humanoid.Health = LP.Character.Humanoid.MaxHealth
                end
            end)
            task.wait(0.01)
        end
    end)
end)

fGod:AddButton("INVISIBLE GOD üëª", function()
    hud:Notify("Modo Fantasma Activado")
    pcall(function()
        local char = LP.Character
        char.Parent = nil
        char.Parent = workspace
    end)
end)

fGod:AddButton("ANTI-VOID üõ°Ô∏è", function()
    antiVoidEnabled = not antiVoidEnabled
    hud:Notify(antiVoidEnabled and "Anti-Vac√≠o ON" or "Anti-Vac√≠o OFF")
    task.spawn(function()
        while antiVoidEnabled do
            pcall(function()
                local root = getRoot(LP.Character)
                if root and root.Position.Y < -50 then
                    root.Velocity = Vector3.new(0, 0, 0)
                    root.CFrame = CFrame.new(root.Position.X, 50, root.Position.Z)
                end
            end)
            task.wait(0.5)
        end
    end)
end)

hud:Notify("LUIS SCRIPT - ACTUALIZADO ‚úÖ")
