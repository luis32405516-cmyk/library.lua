-- [[ SCRIPT LUIS UNV - MOVIMIENTO COMPLETO ]]

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Ray"))()
local Window = Library:CreateWindow()

local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- Variables de estado
local InfiniteJump = false
local Noclip = false
local Flying = false
local FlySpeed = 50

---------------------------------------------------------
-- [ APARTADO: MOVIMIENTO ]
---------------------------------------------------------
Window:CreateTab("âš¡ MOVIMIENTO")

-- 1. VELOCIDAD
Window:CreateSlider("Velocidad", function(valor)
    Humanoid.WalkSpeed = valor
end)

-- 2. SALTO INFINITO
Window:CreateSwitch("Salto Infinito", function(estado)
    InfiniteJump = estado
    game:GetService("UserInputService").JumpRequest:Connect(function()
        if InfiniteJump then
            Humanoid:ChangeState("Jumping")
        end
    end)
end)

-- 3. NOCLIP (Atravesar Paredes)
Window:CreateSwitch("Noclip", function(estado)
    Noclip = estado
    game:GetService("RunService").Stepped:Connect(function()
        if Noclip and Character then
            for _, part in pairs(Character:GetDescendants()) do
                if part:IsA("BasePart") and part.CanCollide then
                    part.CanCollide = false
                end
            end
        end
    end)
end)

-- 4. FLY (El que funcionaba)
Window:CreateSwitch("Volar (Fly)", function(estado)
    Flying = estado
    if Flying then
        local TFrame = Character:WaitForChild("HumanoidRootPart")
        local Pos = Instance.new("BodyPosition", TFrame)
        local Gyro = Instance.new("BodyGyro", TFrame)
        Pos.Name = "LuisFlyPos"
        Pos.maxForce = Vector3.new(math.huge, math.huge, math.huge)
        Pos.position = TFrame.Position
        Gyro.Name = "LuisFlyGyro"
        Gyro.maxTorque = Vector3.new(math.huge, math.huge, math.huge)
        Gyro.cframe = TFrame.CFrame
        
        task.spawn(function()
            while Flying do
                local Camera = workspace.CurrentCamera
                Pos.position = TFrame.Position + (Camera.CFrame.LookVector * FlySpeed / 50)
                Gyro.cframe = Camera.CFrame
                task.wait()
            end
            if Pos then Pos:Destroy() end
            if Gyro then Gyro:Destroy() end
        end)
    else
        if Character.HumanoidRootPart:FindFirstChild("LuisFlyPos") then
            Character.HumanoidRootPart.LuisFlyPos:Destroy()
        end
        if Character.HumanoidRootPart:FindFirstChild("LuisFlyGyro") then
            Character.HumanoidRootPart.LuisFlyGyro:Destroy()
        end
    end
end)

-- Ajuste de velocidad para el Fly
Window:CreateSlider("Velocidad Vuelo", function(valor)
    FlySpeed = valor
end)

---------------------------------------------------------

-- Actualizar referencias
Player.CharacterAdded:Connect(function(newChar)
    Character = newChar
    Humanoid = newChar:WaitForChild("Humanoid")
end)
