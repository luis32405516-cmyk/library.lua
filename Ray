-- [[ LUIS UNV - ELITE LIBRARY + AVATAR + SOUNDS & NOTIFY ]]

local Library = {}

-- Funci√≥n interna para sonidos (rbxassetid)
local function PlaySound(id)
    local s = Instance.new("Sound", game:GetService("SoundService"))
    s.SoundId = "rbxassetid://"..tostring(id)
    s.Volume = 0.5
    s:Play()
    s.Ended:Connect(function() s:Destroy() end)
end

-- Funci√≥n interna para notificaciones
local function SendNotify(title, text)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = 2
    })
end

if game:GetService("CoreGui"):FindFirstChild("Luis_Elite_SafeClose") then
    game:GetService("CoreGui"):FindFirstChild("Luis_Elite_SafeClose"):Destroy()
end

function Library:CreateWindow()
    -- Sonido y aviso al cargar
    PlaySound(5234383442)
    SendNotify("LUIS UNV", "Script Cargado üòà")

    local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
    ScreenGui.Name = "Luis_Elite_SafeClose"

    local Main = Instance.new("Frame", ScreenGui)
    Main.Name = "Main"; Main.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    Main.Position = UDim2.new(0.5, -170, 0.5, -110); Main.Size = UDim2.new(0, 360, 0, 230)
    Main.Active = true; Main.Draggable = true; Main.ClipsDescendants = true
    Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 15)
    local MainStroke = Instance.new("UIStroke", Main); MainStroke.Thickness = 3

    local Header = Instance.new("Frame", Main)
    Header.Name = "Header"; Header.BackgroundColor3 = Color3.fromRGB(25, 25, 25); Header.Size = UDim2.new(1, 0, 0, 35)
    Instance.new("UICorner", Header).CornerRadius = UDim.new(0, 15)

    local Title = Instance.new("TextLabel", Header)
    Title.Text = "SCRIPT üòà UNV üòà LUIS"; Title.Size = UDim2.new(1, 0, 1, 0); Title.BackgroundTransparency = 1; Title.Font = Enum.Font.LuckiestGuy; Title.TextSize = 17; Title.TextColor3 = Color3.new(1, 1, 1)

    local Close = Instance.new("TextButton", Header)
    Close.Size = UDim2.new(0, 20, 0, 20); Close.Position = UDim2.new(1, -28, 0.5, -10); Close.BackgroundColor3 = Color3.fromRGB(180, 40, 40); Close.Text = "X"; Close.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", Close).CornerRadius = UDim.new(1, 0)
    Close.MouseButton1Click:Connect(function() ScreenGui:Destroy() end)

    local Minimize = Instance.new("TextButton", Header)
    Minimize.Size = UDim2.new(0, 20, 0, 20); Minimize.Position = UDim2.new(1, -55, 0.5, -10); Minimize.BackgroundColor3 = Color3.fromRGB(180, 130, 40); Minimize.Text = "-"; Minimize.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", Minimize).CornerRadius = UDim.new(1, 0)
    
    local isMin = false
    Minimize.MouseButton1Click:Connect(function()
        isMin = not isMin
        PlaySound(12222242)
        Main:TweenSize(isMin and UDim2.new(0, 360, 0, 35) or UDim2.new(0, 360, 0, 230), "Out", "Quart", 0.3, true)
        Minimize.Text = isMin and "+" or "-"
    end)

    local Sidebar = Instance.new("ScrollingFrame", Main)
    Sidebar.Name = "Sidebar"; Sidebar.BackgroundColor3 = Color3.fromRGB(15, 15, 15); Sidebar.Position = UDim2.new(0, 8, 0, 42); Sidebar.Size = UDim2.new(0, 100, 1, -50); Sidebar.ScrollBarThickness = 0; Sidebar.AutomaticCanvasSize = Enum.AutomaticSize.Y
    Instance.new("UICorner", Sidebar).CornerRadius = UDim.new(0, 10)
    local SidebarList = Instance.new("UIListLayout", Sidebar); SidebarList.Padding = UDim.new(0, 4); SidebarList.HorizontalAlignment = Enum.HorizontalAlignment.Center

    local AvatarCont = Instance.new("Frame", Sidebar)
    AvatarCont.Size = UDim2.new(0, 50, 0, 50); AvatarCont.BackgroundTransparency = 1
    local AvatarImg = Instance.new("ImageLabel", AvatarCont)
    AvatarImg.Size = UDim2.new(1, 0, 1, 0); AvatarImg.BackgroundTransparency = 1
    AvatarImg.Image = game:GetService("Players"):GetUserThumbnailAsync(game:GetService("Players").LocalPlayer.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)
    Instance.new("UICorner", AvatarImg).CornerRadius = UDim.new(1, 0)
    local ImgStroke = Instance.new("UIStroke", AvatarImg); ImgStroke.Thickness = 2; ImgStroke.Color = Color3.new(1,1,1)

    local Container = Instance.new("Frame", Main)
    Container.Name = "Container"; Container.BackgroundColor3 = Color3.fromRGB(18, 18, 18); Container.Position = UDim2.new(0, 115, 0, 42); Container.Size = UDim2.new(1, -123, 1, -50)
    Instance.new("UICorner", Container).CornerRadius = UDim.new(0, 10)

    task.spawn(function()
        while task.wait(0.01) do
            if not ScreenGui.Parent then break end
            local c = Color3.fromHSV(tick() % 5 / 5, 0.8, 1)
            MainStroke.Color = c; Title.TextColor3 = c; ImgStroke.Color = c
        end
    end)

    local Tabs = {}
    local FirstTab = true

    function Tabs:CreateTab(name)
        local TabPage = Instance.new("ScrollingFrame", Container)
        TabPage.Size = UDim2.new(1, 0, 1, 0); TabPage.BackgroundTransparency = 1; TabPage.Visible = false; TabPage.ScrollBarThickness = 2; TabPage.AutomaticCanvasSize = Enum.AutomaticSize.Y
        local TabList = Instance.new("UIListLayout", TabPage); TabList.Padding = UDim.new(0, 8); TabList.HorizontalAlignment = Enum.HorizontalAlignment.Center

        local t = Instance.new("TextButton", Sidebar)
        t.Size = UDim2.new(0.9, 0, 0, 24); t.BackgroundColor3 = Color3.fromRGB(30, 30, 30); t.Text = name; t.TextColor3 = Color3.new(1, 1, 1); t.Font = Enum.Font.GothamBold; t.TextSize = 9
        Instance.new("UICorner", t).CornerRadius = UDim.new(0, 6)

        if FirstTab then TabPage.Visible = true; t.BackgroundColor3 = Color3.fromRGB(50, 50, 50); FirstTab = false end

        t.MouseButton1Click:Connect(function()
            PlaySound(12222242)
            for _, v in pairs(Container:GetChildren()) do if v:IsA("ScrollingFrame") then v.Visible = false end end
            for _, v in pairs(Sidebar:GetChildren()) do if v:IsA("TextButton") then v.BackgroundColor3 = Color3.fromRGB(30, 30, 30) end end
            TabPage.Visible = true; t.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        end)

        local Elements = {}

        function Elements:CreateButton(text, callback)
            local b = Instance.new("TextButton", TabPage); b.Size = UDim2.new(0.95, 0, 0, 30); b.BackgroundColor3 = Color3.fromRGB(35, 35, 35); b.Text = text; b.TextColor3 = Color3.new(1, 1, 1); b.Font = Enum.Font.GothamBold; b.TextSize = 10; Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
            b.MouseButton1Click:Connect(function()
                PlaySound(4548745567)
                SendNotify("Ejecutado", text)
                pcall(callback)
            end)
        end

        function Elements:CreateSwitch(text, callback)
            local Frame = Instance.new("Frame", TabPage); Frame.Size = UDim2.new(0.95, 0, 0, 32); Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25); Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
            local Label = Instance.new("TextLabel", Frame); Label.Text = text; Label.Size = UDim2.new(0.6,0,1,0); Label.Position = UDim2.new(0,10,0,0); Label.BackgroundTransparency = 1; Label.TextColor3 = Color3.new(1,1,1); Label.Font = Enum.Font.GothamBold; Label.TextSize = 10; Label.TextXAlignment = Enum.TextXAlignment.Left
            local Toggle = Instance.new("TextButton", Frame); Toggle.Size = UDim2.new(0,38,0,20); Toggle.Position = UDim2.new(1,-45,0.5,-10); Toggle.BackgroundColor3 = Color3.fromRGB(45,45,45); Toggle.Text = ""; Instance.new("UICorner", Toggle).CornerRadius = UDim.new(1,0)
            local Circle = Instance.new("Frame", Toggle); Circle.Size = UDim2.new(0,16,0,16); Circle.Position = UDim2.new(0,2,0.5,-8); Circle.BackgroundColor3 = Color3.new(1,1,1); Instance.new("UICorner", Circle).CornerRadius = UDim.new(1,0)
            local state = false
            Toggle.MouseButton1Click:Connect(function()
                state = not state
                PlaySound(6895079853)
                SendNotify(text, state and "Activado ‚úÖ" or "Desactivado ‚ùå")
                Circle:TweenPosition(state and UDim2.new(1,-18,0.5,-8) or UDim2.new(0,2,0.5,-8), "Out", "Quart", 0.2, true)
                Toggle.BackgroundColor3 = state and Color3.fromRGB(0, 180, 100) or Color3.fromRGB(45, 45, 45); pcall(callback, state)
            end)
        end

        function Elements:CreateSlider(text, min, max, callback)
            local Frame = Instance.new("Frame", TabPage); Frame.Size = UDim2.new(0.95, 0, 0, 45); Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25); Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
            local Label = Instance.new("TextLabel", Frame); Label.Text = text .. " : " .. min; Label.Size = UDim2.new(1,-20,0,20); Label.Position = UDim2.new(0,10,0,5); Label.BackgroundTransparency = 1; Label.TextColor3 = Color3.new(1,1,1); Label.Font = Enum.Font.GothamBold; Label.TextSize = 10; Label.TextXAlignment = Enum.TextXAlignment.Left
            local SliderBG = Instance.new("TextButton", Frame); SliderBG.Size = UDim2.new(0.85,0,0,6); SliderBG.Position = UDim2.new(0.5,0,0,32); SliderBG.AnchorPoint = Vector2.new(0.5,0.5); SliderBG.BackgroundColor3 = Color3.fromRGB(40,40,40); SliderBG.Text = ""; Instance.new("UICorner", SliderBG)
            local Fill = Instance.new("Frame", SliderBG); Fill.Size = UDim2.new(0,0,1,0); Fill.BackgroundColor3 = Color3.fromRGB(0, 150, 255); Instance.new("UICorner", Fill)
            
            local isDragging = false
            local function move()
                local mouseX = game:GetService("UserInputService"):GetMouseLocation().X
                local pos = math.clamp((mouseX - SliderBG.AbsolutePosition.X) / SliderBG.AbsoluteSize.X, 0, 1)
                Fill.Size = UDim2.new(pos, 0, 1, 0)
                local val = math.floor(min + (max - min) * pos)
                Label.Text = text .. " : " .. val; pcall(callback, val)
            end
            SliderBG.InputBegan:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then isDragging = true; move() end end)
            game:GetService("UserInputService").InputEnded:Connect(function(input) if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then isDragging = false end end)
            game:GetService("UserInputService").InputChanged:Connect(function(input) if isDragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then move() end end)
        end

        function Elements:CreateTextBox(text, callback)
            local b = Instance.new("TextBox", TabPage); b.Size = UDim2.new(0.95, 0, 0, 30); b.BackgroundColor3 = Color3.fromRGB(35, 35, 35); b.PlaceholderText = text; b.Text = ""; b.TextColor3 = Color3.new(1, 1, 1); b.Font = Enum.Font.GothamBold; b.TextSize = 10; Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
            b.FocusLost:Connect(function() callback(b.Text) end)
        end

        return Elements
    end
    return Tabs
end
return Library
