local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Prueba2"))()
local hud = RainbowUI:CreateWindow(230, 260)

local LocalPlayer = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local StarterGui = game:GetService("StarterGui")

local currentIdx, teleporting = 1, false
local platform, platformConn = nil, nil

local stickerPaths = {
    "Stickers.CheckpointNoSticker00A", "ActiveStickers.wo01", "ActiveStickers.wo02",
    "ActiveStickers.wo03", "ActiveStickers.wo04", "ActiveStickers.wo05",
    "ActiveStickers.wo06", "ActiveStickers.wo07", "ActiveStickers.wo08",
    "ActiveStickers.wo09", "ActiveStickers.wo10"
}

-- L√≥gica de Color Rainbow
local function getRainbowColor(speed)
    return Color3.fromHSV((tick() * (speed or 0.5)) % 1, 1, 1)
end

local function destroyPlatform()
    if platformConn then platformConn:Disconnect() end
    if platform then pcall(function() platform:Destroy() end) end
    platform, platformConn = nil, nil
end

local function createPlatform()
    if platform then return end
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    platform = Instance.new("Part", workspace)
    platform.Size = Vector3.new(6, 1, 6)
    platform.Anchored = true
    platform.Transparency = 0.35
    platform.CanCollide = true
    
    platformConn = RunService.Heartbeat:Connect(function()
        local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if root and platform then 
            platform.CFrame = CFrame.new(root.Position.X, platform.Position.Y, root.Position.Z)
            platform.Color = getRainbowColor(0.3) 
        end
    end)
end

local function teleportTo(target)
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp and target then
        hrp.CFrame = target.CFrame
        if platform then platform.CFrame = target.CFrame * CFrame.new(0, -3.5, 0) end
    end
end

local function tpToSticker(idx)
    local node = workspace
    for seg in stickerPaths[idx]:gmatch("[^%.]+") do node = node and node:FindFirstChild(seg) end
    local touch = node and node:FindFirstChild("Touch")
    if touch then 
        createPlatform() 
        teleportTo(touch)
        hud:Notify("STICKER: " .. idx, 2)
    end
end

-- CARPETA OBJETOS
local fObj = hud:AddFolder("OBJETOS üó∫Ô∏è")
fObj:AddButton("BUSCAR üîé", function()
    teleporting = not teleporting
    if teleporting then
        hud:Notify("Buscando...", 2)
        task.spawn(function()
            createPlatform()
            while teleporting do
                local t = workspace:FindFirstChild("Pickups") and workspace.Pickups:FindFirstChild("Default")
                if t then 
                    local part = t:IsA("Model") and (t.PrimaryPart or t:FindFirstChildWhichIsA("BasePart")) or t
                    teleportTo(part) 
                end
                task.wait(0.1)
            end
            destroyPlatform()
        end)
    else
        hud:Notify("Detenido", 2)
    end
end)

-- CARPETA CHECKPOINTS
local fCheck = hud:AddFolder("CHECKPOINTS üîôüîú")
fCheck:AddRowButtons(
    {text = "‚óÄÔ∏è", callback = function() 
        currentIdx = math.max(1, currentIdx - 1)
        tpToSticker(currentIdx)
    end},
    {text = "‚ñ∂Ô∏è", callback = function() 
        currentIdx = math.min(#stickerPaths, currentIdx + 1)
        tpToSticker(currentIdx)
    end}
)

-- BOTONES GENERALES
hud:AddButton("PLATAFORMA üåà", function() 
    if platform then destroyPlatform() else createPlatform() end 
end)

hud:AddButton("GANAR üèÅ", function()
    local t = workspace:FindFirstChild("Utility") and workspace.Utility.Teleporters.Portal_to_Wc.Collision
    if t then createPlatform() teleportTo(t) hud:Notify("Meta", 2) end
end)

-- BOT√ìN TABLA INTELIGENTE (Detecta la ventana de tus fotos)
hud:AddButton("TABLA UGC üìä", function()
    local pGui = LocalPlayer:FindFirstChild("PlayerGui")
    local found = false
    
    if pGui then
        for _, gui in ipairs(pGui:GetChildren()) do
            -- Busca palabras clave en el nombre de la interfaz
            local name = gui.Name:lower()
            if name:find("ugc") or name:find("leaderboard") or name:find("rank") or name:find("point") then
                if gui:IsA("ScreenGui") then
                    gui.Enabled = not gui.Enabled
                    found = true
                end
                -- Tambi√©n intenta activar el Frame interno por si acaso
                local mainFrame = gui:FindFirstChildWhichIsA("Frame")
                if mainFrame then
                    mainFrame.Visible = not mainFrame.Visible
                    found = true
                end
            end
        end
    end
    
    -- Si no detecta nada personalizado, usa la de Roblox como respaldo
    if not found then
        local state = StarterGui:GetCoreGuiEnabled(Enum.CoreGuiType.PlayerList)
        StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.PlayerList, not state)
    end
    hud:Notify("Tabla Alternada", 1)
end)
