local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/library"))()
local hud = RainbowUI:CreateWindow(230, 200)

local RunService = game:GetService("RunService")
local LocalPlayer = game:GetService("Players").LocalPlayer

local teleporting = false
local stickerTeleporting = false
local currentStickerIndex = 1
local platform = nil
local platformConn = nil

local stickerPaths = {
    "Stickers.CheckpointNoSticker00A", "ActiveStickers.wo01", "ActiveStickers.wo02",
    "ActiveStickers.wo03", "ActiveStickers.wo04", "ActiveStickers.wo05",
    "ActiveStickers.wo06", "ActiveStickers.wo07", "ActiveStickers.wo08",
    "ActiveStickers.wo09", "ActiveStickers.wo10"
}

local function destroyPlatform()
    if platformConn then platformConn:Disconnect() end
    if platform then pcall(function() platform:Destroy() end) end
    platform, platformConn = nil, nil
end

local function createPlatform()
    if platform then return end
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    platform = Instance.new("Part", workspace)
    platform.Size = Vector3.new(6, 1, 6)
    platform.Anchored, platform.Transparency, platform.Color = true, 0.35, Color3.fromRGB(255, 0, 0)
    platformConn = RunService.Heartbeat:Connect(function()
        local root = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if root and platform then platform.CFrame = CFrame.new(root.Position.X, platform.Position.Y, root.Position.Z) end
    end)
end

local function teleportTo(target)
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp and target then
        hrp.CFrame = target.CFrame
        if platform then platform.CFrame = target.CFrame * CFrame.new(0, -3.5, 0) end
    end
end

local function tpToSticker(index)
    local path = stickerPaths[index]
    local node = workspace
    for seg in path:gmatch("[^%.]+") do node = node and node:FindFirstChild(seg) end
    local touch = node and node:FindFirstChild("Touch")
    if touch then 
        createPlatform()
        teleportTo(touch) 
        hud:Notify("Teleport: " .. index)
    end
end

-- CARPETA OBJETOS
local fObjetos = hud:AddFolder("OBJETOS üó∫Ô∏è")
fObjetos:AddButton("BUSCAR üîé", function()
    if teleporting then teleporting = false return end
    teleporting = true
    task.spawn(function()
        createPlatform()
        while teleporting do
            local pickups = workspace:FindFirstChild("Pickups")
            local target = pickups and pickups:FindFirstChild("Default")
            if target then
                if target:IsA("Model") then teleportTo(target.PrimaryPart or target:FindFirstChildWhichIsA("BasePart"))
                else teleportTo(target) end
            end
            task.wait(0.1)
        end
        destroyPlatform()
    end)
end)

-- CARPETA CHECKPOINTS
local fCheck = hud:AddFolder("CHECKPOINTS üîôüîú")
fCheck:AddButton("CICLO STICKERS üîÅ", function()
    if stickerTeleporting then stickerTeleporting = false return end
    stickerTeleporting = true
    task.spawn(function()
        createPlatform()
        for i = 1, #stickerPaths do
            if not stickerTeleporting then break end
            tpToSticker(i)
            task.wait(2.0)
        end
        stickerTeleporting = false
        destroyPlatform()
    end)
end)

fCheck:AddButton("ANTERIOR ‚óÄÔ∏è", function()
    currentStickerIndex = currentStickerIndex - 1
    if currentStickerIndex < 1 then currentStickerIndex = #stickerPaths end
    tpToSticker(currentStickerIndex)
end)

fCheck:AddButton("SIGUIENTE ‚ñ∂Ô∏è", function()
    currentStickerIndex = currentStickerIndex + 1
    if currentStickerIndex > #stickerPaths then currentStickerIndex = 1 end
    tpToSticker(currentStickerIndex)
end)

-- BOTONES PRINCIPALES
hud:AddButton("PLATAFORMA üü•", function()
    if not platform then createPlatform() else destroyPlatform() end
end)

hud:AddButton("GANAR üèÅ", function()
    local target = workspace:FindFirstChild("Utility") and workspace.Utility.Teleporters.Portal_to_Wc.Collision
    if target then createPlatform() teleportTo(target) end
end)
