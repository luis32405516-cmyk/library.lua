-- [[ LUIS UNV - PLATBOOST DNS FIX ]]

local LP = game:GetService("Players").LocalPlayer
local HttpService = game:GetService("HttpService")
local fRequest = request or http_request or syn_request or (fluxus and fluxus.request)

-- CONFIGURACIÓN (Asegúrate de que esto esté bien en tu panel)
local service = 18296
local SCRIPT_GITHUB = "https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Ray1"

-- Función para obtener el Link con manejo de error de DNS
local function getLink()
    -- Intentamos con .net si el .com falla (es el respaldo de Platoboost)
    local url = "https://api.platoboost.net/public/start" 
    
    local success, response = pcall(function()
        return fRequest({
            Url = url,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = HttpService:JSONEncode({
                service = service,
                identifier = tostring(LP.UserId)
            })
        })
    end)

    if success and response.StatusCode == 200 then
        local decoded = HttpService:JSONDecode(response.Body)
        if decoded.success then
            setclipboard(decoded.data.url)
            return true
        end
    end
    return false
end

local function verify(key)
    local url = "https://api.platoboost.net/public/whitelist/"..service.."?identifier="..LP.UserId.."&key="..key
    local success, response = pcall(function()
        return fRequest({Url = url, Method = "GET"})
    end)
    if success and response.StatusCode == 200 then
        local decoded = HttpService:JSONDecode(response.Body)
        return decoded.success and decoded.data.valid
    end
    return false
end

-- [[ INTERFAZ ]]
local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 300, 0, 190); Main.Position = UDim2.new(0.5, -150, 0.5, -95); Main.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
Instance.new("UICorner", Main)

local Input = Instance.new("TextBox", Main)
Input.PlaceholderText = "Pega la Key aquí..."; Input.Size = UDim2.new(0.8, 0, 0, 35); Input.Position = UDim2.new(0.1, 0, 0.25, 0); Input.BackgroundColor3 = Color3.fromRGB(30, 30, 30); Input.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", Input)

local GetBtn = Instance.new("TextButton", Main)
GetBtn.Text = "OBTENER KEY"; GetBtn.Size = UDim2.new(0.8, 0, 0, 35); GetBtn.Position = UDim2.new(0.1, 0, 0.5, 0); GetBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50); GetBtn.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", GetBtn)

GetBtn.MouseButton1Click:Connect(function()
    if getLink() then 
        GetBtn.Text = "¡COPIADO!" 
    else 
        GetBtn.Text = "ERROR DE RED / DNS" -- Esto saldrá si el ejecutor bloquea la web
    end
    task.wait(2); GetBtn.Text = "OBTENER KEY"
end)

local VerifyBtn = Instance.new("TextButton", Main)
VerifyBtn.Text = "VERIFICAR"; VerifyBtn.Size = UDim2.new(0.8, 0, 0, 35); VerifyBtn.Position = UDim2.new(0.1, 0, 0.75, 0); VerifyBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 100); VerifyBtn.TextColor3 = Color3.new(1, 1, 1); Instance.new("UICorner", VerifyBtn)

VerifyBtn.MouseButton1Click:Connect(function()
    if verify(Input.Text) then
        ScreenGui:Destroy()
        loadstring(game:HttpGet(SCRIPT_GITHUB))()
    else
        VerifyBtn.Text = "KEY INVÁLIDA"; task.wait(2); VerifyBtn.Text = "VERIFICAR"
    end
end)
