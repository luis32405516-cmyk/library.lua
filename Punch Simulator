local RainbowUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/luis32405516-cmyk/library.lua/refs/heads/main/Prueba2?v=" .. tick()))()
local hud = RainbowUI:CreateWindow(240, 450)

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local camera = workspace.CurrentCamera

local state = { fly = false, noclip = false, flySpeed = 50 }

local fMov = hud:AddFolder("AJUSTES PERSONAJE ⚙️")

-- Lógica Fly mejorada (Normal como caminar)
fMov:AddButton("VOLAR (FLY)", function()
    state.fly = not state.fly
    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    local bg = root:FindFirstChild("FlyGyro") or Instance.new("BodyGyro", root)
    local bv = root:FindFirstChild("FlyVel") or Instance.new("BodyVelocity", root)
    
    bg.Name = "FlyGyro"
    bv.Name = "FlyVel"
    
    if state.fly then
        bg.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        bg.P = 12000
        bv.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    else
        bg:Destroy()
        bv:Destroy()
        character.Humanoid.PlatformStand = false
    end

    task.spawn(function()
        while state.fly do
            RunService.RenderStepped:Wait()
            character.Humanoid.PlatformStand = true
            bg.CFrame = camera.CFrame
            
            -- Detectar movimiento del joystick/teclado
            local moveDir = character.Humanoid.MoveDirection
            bv.Velocity = moveDir * state.flySpeed
            
            -- Si no te mueves, te quedas estático en el aire
            if moveDir.Magnitude == 0 then
                bv.Velocity = Vector3.new(0, 0, 0)
            end
        end
    end)
end)

-- Slider para la velocidad del vuelo
fMov:AddSlider("VELOCIDAD VUELO", 10, 300, 50, function(v)
    state.flySpeed = v
end)

fMov:AddButton("NOCLIP (ATRAVESAR)", function()
    state.noclip = not state.noclip
    RunService.Stepped:Connect(function()
        if state.noclip then
            for _, p in pairs(character:GetDescendants()) do
                if p:IsA("BasePart") then p.CanCollide = false end
            end
        end
    end)
end)

fMov:AddSlider("WALKSPEED", 16, 300, 16, function(v)
    if character:FindFirstChild("Humanoid") then character.Humanoid.WalkSpeed = v end
end)

hud:Notify("Fly y Sliders configurados ✅", 3)
